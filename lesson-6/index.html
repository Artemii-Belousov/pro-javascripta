<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Интернет-магазин</title>
	<link rel="stylesheet" href="css/normalize.css">
	<link rel="stylesheet" href="css/style.css">
</head>
<body>
<div id="app">
	<header>
		<div class="cart">
			<!-- Форма фильтра -->
			<!-- <form action="#" class="search-form" @submit.prevent="filter">
					<input type="text" class="search-field" v-model="userSearch">
					<button type="submit" class="btn-search">
							<i class="fas fa-search"></i>
					</button>
			</form> -->

			<search></search>
			<button class="btn-cart" type="button" @click="showCart = !showCart">Корзина</button>
			<cart :cart-items="cartItems"
			      :img="imgCart"
			      :visibility="showCart"
			      @remove="remove"></cart>

			<div class="cart-block" v-show="showCart">
				<!-- если cartItems.length == 0 выведим "карзина пустая" -->
				<p v-if="!cartItems.length">Cart is empty</p>
				<div class="cart-item" v-for="item of cartItems" :key="item.id_product">
					<div class="product-bio">
						<img :src="imgCart" alt="Some img">
						<div class="product-desc">
							<div class="product-title">{{ item.product_name }}</div>
							<div class="product-quantity">Quantity: {{ item.quantity }}</div>
							<div class="product-single-price">$ {{ item.price }} each</div>
						</div>
					</div>
					<div class="right-block">
						<div class="product-price">{{item.quantity*item.price}}</div>
						<!-- кнопка удаления товара -->
						<!-- при клике по "х" вызывается функция remove в которую передается товар который нужно удалить -->
						<button class="del-btn" @click="remove(item)">&times;</button>
					</div>
				</div>
			</div>
		</div>
	</header>
	<main>
		<!-- Каталог -->
		<div class="products">
			<!--обходим массив filtered если обходить массив products при фильтрации массив filtered не появляется на странице-->
			<div class="product-item" v-for="product of filtered" :key="product.id_product">
				<img :src="imgProduct" alt="Some img">
				<div class="desc">
					<h3>{{product.product_name}}</h3>
					<p>{{product.price}}</p>
					<!-- кнопка купить -->
					<!-- при клике по кнопке купить вызываетя функция addProduct в которую передаем объект с товаром -->
					<button class="buy-btn" @click="addProduct(product)">Купить</button>
				</div>
			</div>
		</div>
	</main>
</div>
<footer class="footer">
	<div class="container">
		© 2021 Все права защищены.
	</div>
</footer>
<script defer src="https://use.fontawesome.com/releases/v5.7.2/js/all.js" integrity="sha384-0pzryjIRos8mFBWMzSSZApWtPl/5++eIfzYmTgBBmXYdhvxPc+XcFEk+zJwDgWbP" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="js/searchComponent.js"></script>
<script src="js/cartComponent.js"></script>
<script src="js/main.js"></script>
</body>
</html>